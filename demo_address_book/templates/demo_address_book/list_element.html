{% load dfv %}

{#<div>{% reverse_view view 1 2 "a b" a=3 b=4 %}</div>#}
{#<div>{% reverse_view view 1 2 "a b" a=3 b=4 as foo %}</div>#}
{#<div>{% reverse_view view 1 2 as foo %}</div>#}
{#<div>{% reverse_view view 1 2 a=3 b="x y" as foo %}</div>#}
{#<div>{% reverse_view view 1 2 a=3 b=4 as  foo %}</div>#}
{#<div>{% reverse_view view 1 2 a=3 b=4  as  foo %}</div>#}

{#<div>{% reverse_view view dummy="abc"|upper as foo1 %}</div>#}
{#<div>{% url 'demo_address_book-views-list_element' dummy="abc"|upper as foo2 %}</div>#}
{#<div>1: {{ foo1 }}</div>#}
{#<div>2: {{ foo2 }}</div>#}

<div>

    <div class="m-2">
        <input class="form-control"
               placeholder="Filter..."
               name="filter_text"
               value="{{ filter_text }}"
               hx-get="{{ url }}"
               hx-trigger="keyup changed delay:500ms"
               hx-select="#person-list"
               hx-target="#person-list"
        />
    </div>

    <div id="person-list"
         class="list-group list-group-flush"
         hx-boost="true"
         hx-target="#body"
         hx-select="#body"
         hx-include="previous input"
    >

        {% for person in persons %}
            <div>

                <a href="{{ request.path }}"
                    {% hx_vals person_id=person.id|to_str %}
                   class="list-group-item list-group-item-action {% if person.id == person_id %}active{% endif %}"
                >
                    {{ person.first_name }} {{ person.last_name }}
                </a>
            </div>
        {% endfor %}

        {% if has_more_pages %}
            {#            <div hx-get="{{ url }}?page={{ page|add:1 }}"#}
            {#                 hx-trigger="intersect once"#}
            {#                 hx-select="#person-list>*"#}
            {#                 hx-target="this"#}
            {#                 hx-swap="outerHTML"#}
            {#            ></div>#}
        {% endif %}

    </div>

</div>
