{% load static %}
{% load django_htmx %}
{% load dfv %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>

    <title>{% block title %}Django Template{% endblock %}</title>

    <link rel="stylesheet" href="https://classless.de/classless.css">

    <style>
        input.invalid {
            border: 1px solid red;
        }
    </style>

    <script src="https://unpkg.com/htmx.org@1.9.4" integrity="sha384-zUfuhFKKZCbHTY6aRR46gxiqszMk5tcHjsVFxnUo8VMus4kHGVdIYVbOYYNlKmHV" crossorigin="anonymous"></script>

    <script src="https://unpkg.com/idiomorph/dist/idiomorph-ext.min.js"></script>

    <script type="text/javascript">
        htmx.defineExtension('merge', {
            isInlineSwap: function (swapStyle) {
                return swapStyle === 'merge';
            },
            handleSwap: function (swapStyle, target, fragment) {
                window.t = target;

                console.log("target", target);
                console.log("fragment", fragment);
                
                return;

                let result = undefined;
                if (swapStyle === 'merge' || swapStyle === 'merge:outerHTML') {
                    result = Idiomorph.morph(target, fragment.children, {
                        morphStyle: 'outerHTML',
                        ignoreActive: true
                    });
                } else if (swapStyle === 'merge:innerHTML') {
                    result = Idiomorph.morph(target, fragment.children, {
                        morphStyle: 'innerHTML',
                        {#ignoreActive: true#}
                    });
                }
                return result;
            }
        });
    </script>


    {% dfv %}

    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    {% block head %}{% endblock %}
</head>

<body hx-ext="merge">
{% block body %}{% endblock %}
</body>

</html>
